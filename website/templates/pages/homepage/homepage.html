<!--
  Home Page | Cannlytics
  Created: 1/5/2021
  Updated: 10/5/2024
-->
{% extends "components/layout/dashboard.html" %}
{% load static %}
{% block title %}Cannlytics{% endblock %}
{% block dashboard %}
<section class="container-fluid d-flex pb-5">

  <!-- Aside -->
  <aside class="d-none d-lg-block col-lg-3">

    <!-- Latest Updates -->
    <div class="card bg-light border">
      <div class="card-body text-dark">
        <h6 class="sans-serif card-title fw-bold">Latest Updates</h6>
        <ul class="list-unstyled mb-0">
          <!-- Gets data updated at from Firestore (stats/data) -->
          <li class="">
            <small><i class="bi bi-info-circle"></i> Data updated: {{ data_stats.updated_at|date:"M. j, Y" }}</small>
          </li>
          <!-- Gets the latest contributor from OpenCollective -->
          <li id="latest-contribution"></li>
          <li class="">
            <a href="https://opencollective.com/cannlytics-company">
              <small>Contribute to the project <i class="bi bi-arrow-right"></i></small>
            </a>
          </li>
        </ul>
      </div>
    </div>

    {% comment %} <!-- Trending -->
    <!-- Future work: Keep track of trending data -->
    <div class="card mt-4">
      <div class="card-body text-dark">
        <h6 class="sans-serif card-title">Trending</h6>
        <ul class="list-unstyled mb-0">
          <li><i class="bi bi-hash"></i> <small>jack-herer</small></li>
          <li><a href="#"><small>Show more</small></a></li>
        </ul>
      </div>
    </div> {% endcomment %}

    {% comment %}
    <!-- Recently -->
     <!-- Future work: Show user's parsing jobs -->
    <div class="card mt-4">
      <div class="card-body text-dark">
        <h6 class="sans-serif card-title">Recently Parsed</h6>
        <ul class="list-unstyled mb-0">
          <li><a href="#"><small>A Review of Cannabis Lab Tests...</small></a></li>
          <li><a href="#"><small>A Review of Cannabis Lab Tests...</small></a></li>
          <li><a href="#"><small>A Review of Cannabis Lab Tests...</small></a></li>
          <li><a href="#"><small>A Review of Cannabis Lab Tests...</small></a></li>
          <li><a href="#"><small>A Review of Cannabis Lab Tests...</small></a></li>
        </ul>
      </div>
    </div>
    {% endcomment %}

    <!-- Meetups -->
    <div class="card mt-4">
      <div class="card-body text-dark">
        <h6 class="sans-serif card-title">Meetups</h6>
        <ul class="list-unstyled mb-0">
          <li>
            <a href="https://www.meetup.com/cannabis-data-science/">
              <small>
                <i class="bi bi-people"></i> Cannabis Data Science
              </small>
            </a>              
          </li>
        </ul>
      </div>
    </div>

    {% comment %} <!-- Events -->
    <!-- Future work: Load events from meetup.com -->
    <!-- Future work: Get video links to youtube.com -->
    <div class="card mt-4">
      <div class="card-body text-dark">
        <h6 class="sans-serif card-title">Events</h6>
        <ul class="list-unstyled mb-0">
          <li><i class="bi bi-calendar-event"></i> <small>A Review of Cannabis Lab Test...</small></li>
          <li><a href="#"><small>Show more</small></a></li>
        </ul>
      </div>
    </div> {% endcomment %}

  </aside>

  <!-- Main Content -->
  <main class="flex-grow-1 px-3">
    <div class="d-flex justify-content-between mb-2">
      <h4 class="sans-serif fw-bold mb-0">Data</h4>

      <!-- View Controls -->
      <div>

        <!-- Data type select -->
        <div class="d-inline-block mb-3 ms-2">
          <select
            id="data-type-select"
            class="form-select form-select-sm"
            onchange="cannlytics.website.changeDataType(this.value)"
          >
            <option value="all" selected><small>🔍 All</small></option>
            <option value="coas"><small>📜 COAs</small></option>
            <option value="results"><small>🧪 Results</small></option>
            <option value="strains"><small>🪴 Strains</small></option>
            <option value="organizations"><small>🧑‍🌾 Organizations</small></option>
            <option value="compounds"><small>🔬 Compounds</small></option>
          </select>
        </div>

        <!-- Sort By -->
        <div class="dropdown d-inline-block ms-2">
          <select
            id="order-select"
            class="form-select form-select-sm"
            onchange="cannlytics.website.changeOrder()"
          >
            <option value="desc" selected><small>Latest</small></option>
            <option value="asc"><small>Oldest</small></option>
          </select>
        </div>

        <!-- TODO: Filter button -->
        <!-- Filters are dynamic depending on the data type -->

        {% comment %}
        <!-- View selection -->
        <!-- Future work: Implement -->
        <div class="btn-group btn-group-sm ms-2" role="group" aria-label="View selection">
          <button type="button" class="btn btn-outline-primary active" id="grid-button" onclick="switchToGridView()">
            <i class="bi bi-grid"></i>
          </button>
          <button type="button" class="btn btn-outline-primary" id="list-button" onclick="switchToListView()">
            <i class="bi bi-list"></i>
          </button>
        </div>
        {% endcomment %}

      </div>

    </div>

    <!-- Observation Cards -->
    <div id="data-grid" class="grid-view row"></div>

  </main>

  <!-- Report dialog -->
  {% include "components/dialogs/report_dialog.html" %}

</section>
{% endblock %}

{% block page_js %}
<!-- Homepage JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  cannlytics.website.initializeHomepage();
});
</script>
{% endblock %}

<!-- Optional: Live analytics -->
{% comment %} {% include "pages/homepage/components/live_analytics.html" %} {% endcomment %}

<!-- Optional: Community reviews -->
